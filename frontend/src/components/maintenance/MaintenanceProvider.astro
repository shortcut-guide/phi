<!-- グローバルでメンテナンス状態を管理する -->
import { createSignal, createContext, useContext } from "solid-js";

const MaintenanceContext = createContext<{ isMaintenance: () => boolean }>({ isMaintenance: () => false });

export const MaintenanceProvider = (props: { children: any }) => {
  const maintenancePages = import.meta.env.PUBLIC_MAINTENANCE_PAGES?.split(',') || [];
  const [isMaintenance] = createSignal(maintenancePages.includes(window.location.pathname));

  return (
    <MaintenanceContext.Provider value={{ isMaintenance }}>
      {props.children}
    </MaintenanceContext.Provider>
  );
};

export const useMaintenance = () => useContext(MaintenanceContext);