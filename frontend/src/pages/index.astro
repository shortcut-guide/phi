---
import { PinGrid } from '@/f/components/PinGrid';
import { useState, useEffect } from 'preact/hooks';

const initialItems = await fetch('/api/pins').then((res) => res.json());

const Page = () => {
  const [items, setItems] = useState(initialItems);

  const loadMore = async () => {
    const res = await fetch(`/api/pins?offset=${items.length}`);
    const more = await res.json();
    setItems([...items, ...more]);
  };

  return <PinGrid items={items} loadMore={loadMore} />;
};
---
<Page />