---
const page = Number(Astro.params.page || "1");
const limit = 30;
const offset = (page - 1) * limit;

const res = await fetch(`/api/pins?offset=${offset}`);
const items = await res.json();
---

<html lang="ja">
  <head>
    <title>ページ {page} | 商品一覧</title>
  </head>
  <body class="p-6">
    <h1 class="text-xl font-bold mb-4">ページ {page}</h1>

    <section class="grid grid-cols-3 gap-4">
      {items.map(item => (
        <div class="border rounded shadow p-2" key={item.id}>
          <img src={item.imageUrl} alt={item.title} loading="lazy" class="w-full h-auto" />
          <h2 class="mt-2 text-sm font-semibold">{item.title}</h2>
        </div>
      ))}
    </section>
  </body>
</html>
