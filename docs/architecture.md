# phis-admin

---

## cloudflare d1

***
### å•†å“ç®¡ç†ãƒ†ãƒ¼ãƒ–ãƒ«

| é …ç›® | èª¬æ˜ |
|------|------|
| **å•†å“ID** *å¿…é ˆ | å•†å“ã®ä¸€æ„è­˜åˆ¥å­ï¼ˆASINãªã©ï¼‰ |
| **ã‚·ãƒ§ãƒƒãƒ—ID** *å¿…é ˆ | å•†å“ãŒæ‰€å±ã™ã‚‹ECã‚µã‚¤ãƒˆ |
| **å•†å“å** *å¿…é ˆ | å•†å“ã®åç§° |
| **ã‚«ãƒ†ã‚´ãƒª** *å¿…é ˆ | JSONå½¢å¼ã§ã‚«ãƒ†ã‚´ãƒªæƒ…å ±ã‚’ä¿æŒ |
| **å•†å“ä¾¡æ ¼** *å¿…é ˆ | å•†å“ã®é€šå¸¸ä¾¡æ ¼ |
| **ç¾å‰²å¼•ä¾¡æ ¼** | å‰²å¼•å¾Œã®ä¾¡æ ¼ |
| **å‰²å¼•ç‡** | å‰²å¼•ç‡ï¼ˆ%ï¼‰ |
| **å‰²å¼•å±¥æ­´** | JSONå½¢å¼ã§å‰²å¼•å±¥æ­´ã‚’ä¿æŒ |
| **å•†å“ç”»åƒ** | å•†å“ã®ç”»åƒURL |
| **å•†å“ãƒªãƒ³ã‚¯** *å¿…é ˆ | å•†å“ãƒšãƒ¼ã‚¸ã®ãƒªãƒ³ã‚¯ |
| **ã‚¢ã‚½ã‚·ã‚¨ã‚¤ãƒˆãƒªãƒ³ã‚¯** | ã‚¢ãƒ•ã‚£ãƒªã‚¨ã‚¤ãƒˆç”¨ã®ãƒªãƒ³ã‚¯ |
| **å•†å“æ¦‚è¦** | å•†å“ã®èª¬æ˜ï¼ˆæ®µè½å½¢å¼ï¼‰ |
| **å¹³å‡è©•ä¾¡** | ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å¹³å‡è©•ä¾¡ï¼ˆæ˜Ÿè©•ä¾¡ãªã©ï¼‰ |
| **ãƒ¬ãƒ“ãƒ¥ãƒ¼æ•°** | ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®ç·æ•° |
| **åœ¨åº«çŠ¶æ³** *å¿…é ˆ | å•†å“ã®åœ¨åº«æƒ…å ±ï¼ˆåœ¨åº«ã‚ã‚Š/ãªã—ãªã©ï¼‰ |
| **é…é€æƒ…å ±** *å¿…é ˆ | é…é€ã«é–¢ã™ã‚‹æƒ…å ±ï¼ˆé…é€æ—¥æ•°ãƒ»é…é€æ¥­è€…ãªã©ï¼‰ |
| **è²©å£²å…ƒ** *å¿…é ˆ | å•†å“ã®è²©å£²å…ƒæƒ…å ± |
| **å•†å“ç‰¹é•·** | JSONå½¢å¼ã§å•†å“ç‰¹é•·ã‚’ç®¡ç† |
| **ä¿è¨¼æƒ…å ±** | ä¿è¨¼ã«é–¢ã™ã‚‹æƒ…å ± |
| **å¯å¤‰ã‚¹ãƒšãƒƒã‚¯æƒ…å ±** | JSONå½¢å¼ã§å¯å¤‰ã‚¹ãƒšãƒƒã‚¯æƒ…å ±ã‚’ç®¡ç† |
| **ç²å¾—ãƒã‚¤ãƒ³ãƒˆæ•°** | è³¼å…¥æ™‚ã«ç²å¾—ã§ãã‚‹ãƒã‚¤ãƒ³ãƒˆæ•° |
| **ãƒã‚¤ãƒ³ãƒˆé‚„å…ƒç‡** | ãƒã‚¤ãƒ³ãƒˆé‚„å…ƒç‡ï¼ˆ%ï¼‰ |
| **ãƒã‚¤ãƒ³ãƒˆæœ‰åŠ¹æœŸé™** | ç²å¾—ãƒã‚¤ãƒ³ãƒˆã®æœ‰åŠ¹æœŸé™ |
| **ãƒã‚¤ãƒ³ãƒˆç²å¾—ã®æ¡ä»¶** | ãƒã‚¤ãƒ³ãƒˆç²å¾—ã«é–¢ã™ã‚‹æ¡ä»¶ |
| **å®šæœŸä¾¿** | ç•°ãªã‚‹å®šæœŸãŠãƒˆã‚¯ä¾¿ã®åç§°ã€é…é€æ¡ä»¶ã€ä¾¡æ ¼ã€æ—¥æ•°ã€åœ¨åº«çŠ¶æ³ã€é…é€é »åº¦ã‚’é©åˆ‡ã«ç®¡ç† |
| **ãƒ–ãƒ©ãƒ³ãƒ‰å** | å•†å“ã®ãƒ–ãƒ©ãƒ³ãƒ‰å |
| **æ¢±åŒ…ã‚µã‚¤ã‚º** | å•†å“ã®æ¢±åŒ…ã‚µã‚¤ã‚º |
| **ãƒ¡ãƒ¼ã‚«ãƒ¼è£½é€ ä¸­æ­¢** | ãƒ¡ãƒ¼ã‚«ãƒ¼ã«ã‚ˆã‚‹è£½é€ ä¸­æ­¢æƒ…å ± |
| **å•†å“ã‚¿ã‚¤ãƒ—** | å•†å“ã®ç¨®é¡ï¼ˆé£Ÿå“ã€å®¶é›»ã€è¡£é¡ãªã©ï¼‰ |
| **ã‚«ãƒ•ã‚§ã‚¤ãƒ³ã®æœ‰ç„¡** | ã‚«ãƒ•ã‚§ã‚¤ãƒ³å«æœ‰ã®æœ‰ç„¡ |
| **ãƒ¡ãƒ¼ã‚«ãƒ¼å** | ãƒ¡ãƒ¼ã‚«ãƒ¼ã®åç§° |
| **åŸç”£å›½** | å•†å“ã®åŸç”£å›½ |
| **å•†å“ã®é‡é‡ï¼ˆkgï¼‰** | å•†å“ã®é‡é‡ï¼ˆkgå˜ä½ï¼‰ |
| **ã‚¹ãƒˆã‚¢å£²ã‚Œç­‹ãƒ©ãƒ³ã‚­ãƒ³ã‚°** | ã‚¹ãƒˆã‚¢ã§ã®å£²ã‚Œç­‹ãƒ©ãƒ³ã‚­ãƒ³ã‚°æƒ…å ± |
| **ã‚¹ãƒˆã‚¢å–æ‰±é–‹å§‹æ—¥** | ã‚¹ãƒˆã‚¢ã§ã®å–æ‰±é–‹å§‹æ—¥ |
***

ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ« 
### sites ãƒ†ãƒ¼ãƒ–ãƒ«
| é …ç›® | èª¬æ˜ | ãƒ‡ãƒ¼ã‚¿å‹ |
|------|------|------|
| id | ã‚µã‚¤ãƒˆè­˜åˆ¥å­ | string
| name | ECã‚µã‚¤ãƒˆå | string
| base_url | åŸºæœ¬URL | string
| selectors | ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ç”¨ã‚»ãƒ¬ã‚¯ã‚¿æƒ…å ± | object
| created_at | ä½œæˆæ—¥æ™‚ | datetime

### scraped_products
| é …ç›® | èª¬æ˜ | ãƒ‡ãƒ¼ã‚¿å‹ |
|------|------|------|
| id | ä¸€æ„ã®è­˜åˆ¥å­ |	string |
| site_id |	sites ãƒ†ãƒ¼ãƒ–ãƒ«ã®id |string (relation) |
| product_url |	å•†å“ãƒšãƒ¼ã‚¸URL	| string |
| scraped_data | å–å¾—ãƒ‡ãƒ¼ã‚¿ï¼ˆã‚µã‚¤ãƒˆã”ã¨ã®æ§‹é€ ï¼‰| object |
| last_scraped_at |	ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°æ—¥æ™‚ | datetime |


### japan_categories ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆæ—¥æœ¬æ¨™æº–å•†å“åˆ†é¡ï¼‰
| ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ | èª¬æ˜ã€€| ãƒ‡ãƒ¼ã‚¿å‹ã€€|
|------|------|------|
| `id` | ã‚«ãƒ†ã‚´ãƒªIDï¼ˆJSICã‚³ãƒ¼ãƒ‰ or JICFSã‚³ãƒ¼ãƒ‰ï¼‰ | `string` |
| `name` | ã‚«ãƒ†ã‚´ãƒªå | `string` |
| `parent_category` | ä¸Šä½ã‚«ãƒ†ã‚´ãƒªï¼ˆè¦ªã‚«ãƒ†ã‚´ãƒªIDï¼‰| `string` (relation) |
| `level` | éšå±¤ãƒ¬ãƒ™ãƒ«ï¼ˆå¤§åˆ†é¡ï¼1, ä¸­åˆ†é¡ï¼2, å°åˆ†é¡ï¼3ï¼‰ | `number` |
| `alternative_names` | åˆ¥åï¼ˆECã‚µã‚¤ãƒˆã”ã¨ã®ã‚«ãƒ†ã‚´ãƒªåï¼‰| `array` |

---

## **1. æ¦‚è¦**
æœ¬ã‚·ã‚¹ãƒ†ãƒ ã¯ã€è¤‡æ•°ã®ECã‚µã‚¤ãƒˆã‚’æ¨ªæ–­çš„ã«ç®¡ç†ã—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è³¼è²·æ´»å‹•ã‚’ä¸€å…ƒåŒ–ã™ã‚‹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§ã™ã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå„ªå…ˆã™ã‚‹ECã‚µã‚¤ãƒˆã‚’è¨­å®šã—ã€å•†å“æ¤œç´¢ã€æ³¨æ–‡è‡ªå‹•åŒ–ã€ãƒ¡ãƒ¼ãƒ«ç®¡ç†ã€ãƒã‚¤ãƒ³ãƒˆç®¡ç†ã€å£²ä¸Šç®¡ç†ãªã©ã‚’çµ±åˆçš„ã«æä¾›ã—ã¾ã™ã€‚
ã¾ãŸã€ä»£ç†è³¼å…¥ã‚’æ¨ªæ–­çš„ã«ã‚·ã‚¹ãƒ†ãƒ æ©Ÿèƒ½ã¨ã—ã¦æä¾›ã€‚


```mermaid
sequenceDiagram
    participant User as ãƒ¦ãƒ¼ã‚¶ãƒ¼
    participant Frontend as Frontend(astro/react)
    participant Backend as Backend(nextjs)
    participant Puppeteer as Puppeteer
    participant EC_Site as ECã‚µã‚¤ãƒˆ
    participant DB as Cloudflare D1
    participant Stripe as Stripe API

    User ->> Frontend: è³¼å…¥ä¾é ¼(å•†å“URL, æ•°é‡, å¸Œæœ›ä¾¡æ ¼)
    Frontend ->> Backend: è³¼å…¥ä¾é ¼APIãƒªã‚¯ã‚¨ã‚¹ãƒˆ
    Backend ->> DB: ä¾é ¼å†…å®¹ã‚’ä¿å­˜
    Backend ->> Puppeteer: å•†å“ãƒšãƒ¼ã‚¸ã®å–å¾—ä¾é ¼
    Puppeteer ->> EC_Site: å•†å“ãƒšãƒ¼ã‚¸ã‚’ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°
    EC_Site -->> Puppeteer: å•†å“æƒ…å ±ã‚’è¿”å´
    Puppeteer -->> Backend: åœ¨åº«/ä¾¡æ ¼/é…é€å¯å¦ã‚’è¿”å´
    alt è³¼å…¥å¯èƒ½ãªå ´åˆ
        Backend ->> EC_Site: èªè¨¼å‡¦ç†ï¼ˆOAuth/ãƒ­ã‚°ã‚¤ãƒ³ï¼‰
        EC_Site -->> Backend: èªè¨¼æˆåŠŸ
        Backend ->> EC_Site: å•†å“ã‚’ã‚«ãƒ¼ãƒˆã«è¿½åŠ ãƒ»è³¼å…¥æ‰‹ç¶šã
        EC_Site -->> Backend: æ³¨æ–‡æˆåŠŸï¼ˆæ³¨æ–‡ç•ªå·, é‡‘é¡ï¼‰
        Backend ->> Stripe: æ±ºæ¸ˆå‡¦ç†
        Stripe -->> Backend: æ±ºæ¸ˆæˆåŠŸ
        Backend ->> DB: æ³¨æ–‡å†…å®¹ã‚’ä¿å­˜
        Backend ->> User: è³¼å…¥æˆåŠŸé€šçŸ¥
    else è³¼å…¥ä¸å¯ã®å ´åˆ
        Backend ->> User: è³¼å…¥ä¸å¯é€šçŸ¥
    end
``` 
---

## **2. æ©Ÿèƒ½ä¸€è¦§**
| æ©Ÿèƒ½ | æ¦‚è¦ |
|------|------|
| **å•†å“æ¤œç´¢** | è¤‡æ•°ã®ECã‚µã‚¤ãƒˆã‚’æ¨ªæ–­æ¤œç´¢ã—ã€ä¾¡æ ¼ãƒ»åœ¨åº«æƒ…å ±ã‚’å–å¾— |
| **å„ªå…ˆECè¨­å®š** | ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå„ªå…ˆã™ã‚‹ECã‚µã‚¤ãƒˆã‚’è¨­å®šã—ã€æ¤œç´¢çµæœã‚’æœ€é©åŒ– |
| **æ³¨æ–‡è‡ªå‹•åŒ–** | ECã‚µã‚¤ãƒˆã®ãƒ•ã‚©ãƒ¼ãƒ ã‚’ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã—ã€ã‚«ãƒ¼ãƒˆè¿½åŠ ãƒ»æ³¨æ–‡å…¥åŠ›ã‚’è‡ªå‹•åŒ– |
| **ãƒ¡ãƒ¼ãƒ«ç®¡ç†** | å„ECã‚µã‚¤ãƒˆã®æ³¨æ–‡ãƒ¡ãƒ¼ãƒ«ã‚’ä¸€å…ƒç®¡ç†ï¼ˆGmail APIï¼‰ |
| **ãƒã‚¤ãƒ³ãƒˆç®¡ç†** | å„ECã‚µã‚¤ãƒˆã®ãƒã‚¤ãƒ³ãƒˆã‚’å–å¾—ã—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«æä¾› |
| **å£²ä¸Šç®¡ç†** | å„ECã‚µã‚¤ãƒˆã®å£²ä¸Šæƒ…å ±ã‚’å–å¾—ã—ã€çµ±åˆç®¡ç† |
| **APIåˆ¤å®š** | ECã‚µã‚¤ãƒˆã®APIæä¾›ã®æœ‰ç„¡ãƒ»æœ‰æ–™/ç„¡æ–™åˆ¤å®šã‚’å®Ÿæ–½ |
| **äºˆç´„è²©å£²åˆ¤å®š** | å•†å“ãŒäºˆç´„è²©å£²ã‹ã©ã†ã‹ã‚’åˆ¤åˆ¥ã—ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«è¨˜éŒ² |
| **ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³å•†å“åˆ¤å®š** | ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¨ªå•ã—ãŸå•†å“ãƒšãƒ¼ã‚¸ã®ã¿ã«ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã‚’å®Ÿè¡Œ |
| **é…é€çŠ¶æ³ç®¡ç†** | é…é€æƒ…å ±ã‚’å–å¾—ã—ã€ECã”ã¨ã«è¨˜éŒ² |
| **ä¾¡æ ¼æ¯”è¼ƒåˆ†æ** | è¤‡æ•°è²©å£²åº—ã®ä¾¡æ ¼ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§æ¯”è¼ƒã—ã€æœ€é©ä¾¡æ ¼ã‚’æç¤º |
| **ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¨è©•ä¾¡ç®¡ç†** | è³¼å…¥è€…ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’åˆ†æã—ã€ä¿¡é ¼æ€§ã®é«˜ã„æƒ…å ±ã‚’æä¾› |
| **ãƒ©ãƒ³ã‚­ãƒ³ã‚°æ©Ÿèƒ½** | äººæ°—å•†å“ã‚„ãƒˆãƒ¬ãƒ³ãƒ‰ã‚’ãƒ©ãƒ³ã‚­ãƒ³ã‚°åŒ–ã—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ææ¡ˆ |
| **å•†å“ã‚¹ãƒšãƒƒã‚¯æ¯”è¼ƒ** | è¤‡æ•°å•†å“ã®ä»•æ§˜ã‚„æ€§èƒ½ã‚’ç›´æ„Ÿçš„ã«æ¯”è¼ƒå¯èƒ½ã«ã™ã‚‹ |
| **å¤–éƒ¨ã‚«ãƒ¼ãƒˆè³¼å…¥** | è¤‡æ•°ECã‚µã‚¤ãƒˆã®å•†å“ã‚’ä¸€æ‹¬ã§ã‚«ãƒ¼ãƒˆã«è¿½åŠ ã—ã€è³¼å…¥ã‚’æœ€é©åŒ– |
| **ã‚µãƒ¼ãƒ“ã‚¹æ¯”è¼ƒï¼ˆä¿é™ºãƒ»é€šä¿¡ãƒ»é‡‘èï¼‰** | å•†å“ä»¥å¤–ã®ã‚µãƒ¼ãƒ“ã‚¹ï¼ˆä¿é™ºã€å…‰å›ç·šã€ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰ç­‰ï¼‰ã®æ¯”è¼ƒ |

---

## **3. ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£**
### **3.1 ä½¿ç”¨æŠ€è¡“**
| é …ç›® | ä½¿ç”¨æŠ€è¡“ |
|------|------|
| **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰** | React (Next.js) |
| **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰** | Node.js (Express) |
| **ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°** | Puppeteer |
| **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹** | PostgreSQL / MongoDB |
| **èªè¨¼** | OAuth2 / Firebase Auth |
| **ãƒ¡ãƒ¼ãƒ«ç®¡ç†** | Gmail API / Mailgun |
| **æ±ºæ¸ˆç®¡ç†** | Stripe API |
| **æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³** | Elasticsearch |
| **ãƒãƒƒãƒ—é€£æº** | Google Maps API |
| **ã‚¯ãƒ©ã‚¦ãƒ‰ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°** | Indigo Webarea |

---


## **4. è©³ç´°æ©Ÿèƒ½ä»•æ§˜**
### **4.1 å•†å“æ¤œç´¢ã¨ä¾¡æ ¼æ¯”è¼ƒ**
- **è¤‡æ•°ã®ECã‚µã‚¤ãƒˆï¼ˆæ¥½å¤©ã€Amazonã€Yahoo!ã‚·ãƒ§ãƒƒãƒ”ãƒ³ã‚°ãªã©ï¼‰ã‚’æ¨ªæ–­æ¤œç´¢**
- **ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚° & å…¬å¼APIã®åˆ‡ã‚Šæ›¿ãˆå¯¾å¿œ**
- **å•†å“æƒ…å ±ã€ä¾¡æ ¼ã€åœ¨åº«ã€ãƒã‚¤ãƒ³ãƒˆé‚„å…ƒç‡ã‚’å–å¾—**
- **Google Mapsã¨ã®é€£æºã«ã‚ˆã‚‹åº—èˆ—æƒ…å ±ã®è¡¨ç¤º**
- **ä¾¡æ ¼æ¨ç§»ã®å¯è¦–åŒ–ã€è³¼å…¥ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã®ææ¡ˆ**

### **4.2 æ³¨æ–‡è‡ªå‹•åŒ–**
- **ãƒ•ã‚©ãƒ¼ãƒ å…¥åŠ›ã®è‡ªå‹•åŒ–ï¼ˆãƒ­ã‚°ã‚¤ãƒ³ã€ã‚«ãƒ¼ãƒˆè¿½åŠ ã€æ³¨æ–‡å‡¦ç†ï¼‰**
- **CAPTCHAå¯¾å¿œï¼ˆæ‰‹å‹•èªè¨¼è£œåŠ©ï¼‰**
- **æ³¨æ–‡å±¥æ­´ã®ç®¡ç†ã¨çµ±åˆ**

### **4.3 ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¨è©•ä¾¡ç®¡ç†**
- **è³¼å…¥è€…ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’åé›†ãƒ»åˆ†æ**
- **ä¿¡é ¼æ€§ã®ä½ã„ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°**
- **AIã«ã‚ˆã‚‹ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®è¦ç´„ã¨è©•ä¾¡ã‚¹ã‚³ã‚¢ç®—å‡º**

### **4.4 å£²ä¸Šç®¡ç†**
- **æ³¨æ–‡å±¥æ­´ã‚’ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚° or APIã§å–å¾—**
- **å•†å“ã”ã¨ã®å£²ä¸Šæƒ…å ±ã‚’ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«è¨˜éŒ²**
- **æœˆåˆ¥ãƒ»å¹´åˆ¥ã®å£²ä¸Šåˆ†æ**

### **4.5 é…é€çŠ¶æ³ç®¡ç†**
- **é…é€çŠ¶æ³ã‚’æä¾›ã™ã‚‹ECã‚µã‚¤ãƒˆã‚’åˆ¤å®š**
- **æ³¨æ–‡å±¥æ­´ãƒšãƒ¼ã‚¸ã‹ã‚‰é…é€çŠ¶æ³ã‚’å–å¾—**
- **é…é€ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ä¿å­˜ã—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«æä¾›**

---

## **5. åç›ŠåŒ–ãƒ¢ãƒ‡ãƒ«**
| ãƒ¢ãƒ‡ãƒ« | åç›ŠåŒ–æ‰‹æ³• |
|------|------|
| **ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³èª²é‡‘** | ãƒ—ãƒ¬ãƒŸã‚¢ãƒ æ©Ÿèƒ½ï¼ˆæœˆé¡ Â¥980ï½ï¼‰ |
| **æ±ºæ¸ˆæ‰‹æ•°æ–™** | Stripeæ±ºæ¸ˆæ™‚ã«1ï½5%ã®æ‰‹æ•°æ–™ã‚’å¾´å |
| **ã‚¢ãƒ•ã‚£ãƒªã‚¨ã‚¤ãƒˆåç›Š** | Amazonã€æ¥½å¤©ã€Yahoo!ã‚·ãƒ§ãƒƒãƒ”ãƒ³ã‚°çµŒç”±ã®æ‰‹æ•°æ–™ |
| **ã‚¹ãƒãƒ³ã‚µãƒ¼åºƒå‘Š** | å„ªå…ˆECã‚µã‚¤ãƒˆã®ãƒ—ãƒ­ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³æ  |
| **ä¼æ¥­å‘ã‘APIæä¾›** | å•†å“æ¤œç´¢APIãƒ»å£²ä¸Šç®¡ç†APIã®æä¾›ï¼ˆÂ¥10,000/æœˆï½ï¼‰ |

---

## **6. ã¾ã¨ã‚**
- **ECæ¨ªæ–­å‹ã®è³¼å…¥ç®¡ç†ã‚’å®Ÿç¾**
- **ãƒã‚¤ãƒ³ãƒˆãƒ»å£²ä¸Šãƒ»é…é€ãƒ»æ³¨æ–‡æƒ…å ±ã‚’ä¸€å…ƒç®¡ç†**
- **ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚° & APIã®ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã§å®‰å®šé‹ç”¨**
- **åç›ŠåŒ–ãƒ¢ãƒ‡ãƒ«ã‚’å¤šè§’çš„ã«å±•é–‹ã—ã€ãƒ“ã‚¸ãƒã‚¹åŒ–ã‚’å®Ÿç¾**

---

## ä¾¡æ ¼ã‚³ãƒ åˆ†æ
### å•†å“ã‚«ãƒ†ã‚´ãƒªåˆ¥ã®æ¯”è¼ƒæ©Ÿèƒ½
#### ç›®çš„
ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒç‰¹å®šã®è£½å“ã‚«ãƒ†ã‚´ãƒªï¼ˆå®¶é›»ã€PCã€ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ãªã©ï¼‰ã®ä¸­ã‹ã‚‰å•†å“ã‚’æ¯”è¼ƒã—ã‚„ã™ãã™ã‚‹ã€‚
#### ç‰¹å¾´
- ã‚«ãƒ†ã‚´ãƒªåˆ†é¡
- å®¶é›»ã€ITé–¢é€£å•†å“ã€ã‚µãƒ¼ãƒ“ã‚¹ï¼ˆä¿é™ºã€æ—…è¡Œãªã©ï¼‰ã‚’ç´°ã‹ãåˆ†é¡ã€‚
- ã‚«ãƒ†ã‚´ãƒªé–“ã®éšå±¤ãŒåˆ†ã‹ã‚Šã‚„ã™ãã€ç›®çš„ã®å•†å“ã«ãŸã©ã‚Šç€ãã‚„ã™ã„è¨­è¨ˆã€‚
- ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼æ©Ÿèƒ½
ãƒ–ãƒ©ãƒ³ãƒ‰ã€ä¾¡æ ¼å¸¯ã€æ©Ÿèƒ½ã€æ€§èƒ½ã€ãƒ¬ãƒ“ãƒ¥ãƒ¼è©•ä¾¡ãªã©ã§çµã‚Šè¾¼ã¿å¯èƒ½ã€‚
#### å®Ÿç¾æ–¹æ³•
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ§‹é€ ï¼šå•†å“æƒ…å ±ã¯ã‚«ãƒ†ã‚´ãƒªã”ã¨ã«åˆ†å‰²ã•ã‚ŒãŸãƒ†ãƒ¼ãƒ–ãƒ«ã«æ ¼ç´ã€‚
- æ¤œç´¢æ©Ÿèƒ½ï¼šElasticsearchãªã©ã®æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³ã‚’ä½¿ç”¨ã—ã¦é«˜é€Ÿæ¤œç´¢ã‚’å®Ÿç¾ã€‚
### ä¾¡æ ¼æ¯”è¼ƒ
#### ç›®çš„
è¤‡æ•°ã®è²©å£²åº—ã®ä¾¡æ ¼ã‚’ä¸€è¦§è¡¨ç¤ºã—ã€æœ€å®‰å€¤ã‚’æç¤ºã€‚
#### ç‰¹å¾´
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°
- å„åº—èˆ—ã‹ã‚‰ã®ä¾¡æ ¼ãƒ‡ãƒ¼ã‚¿ã‚’APIã‚„ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã§å®šæœŸçš„ã«æ›´æ–°ã€‚
- ä¾¡æ ¼æ¨ç§»ã‚°ãƒ©ãƒ•
- éå»ã®ä¾¡æ ¼å±¥æ­´ã‚’å¯è¦–åŒ–ã—ã€è³¼å…¥ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’åˆ¤æ–­ã—ã‚„ã™ãã™ã‚‹ã€‚
#### å®Ÿç¾æ–¹æ³•
- ä¾¡æ ¼ãƒ‡ãƒ¼ã‚¿å–å¾—ï¼šè²©å£²åº—ã¨ã®ææºã«ã‚ˆã‚Šã€APIã‚’é€šã˜ã¦ä¾¡æ ¼ãƒ‡ãƒ¼ã‚¿ã‚’è‡ªå‹•å–å¾—ã€‚
- ä¾¡æ ¼æ›´æ–°ã®åŠ¹ç‡åŒ–ï¼šå¤‰æ›´ãŒé »ç¹ãªå•†å“ã®ã¿æ›´æ–°ã—ã€å…¨å•†å“ã®æ›´æ–°è² è·ã‚’è»½æ¸›ã€‚
### ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¨è©•ä¾¡
#### ç›®çš„
å®Ÿéš›ã®è³¼å…¥è€…ã‹ã‚‰ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’é›†ç´„ã—ã€è³¼å…¥ã®å‚è€ƒã«ã™ã‚‹ã€‚
#### ç‰¹å¾´
- ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®è³ªã‚’ç®¡ç†
- è³¼å…¥è€…ã®ã¿ãƒ¬ãƒ“ãƒ¥ãƒ¼å¯èƒ½ã€ã¾ãŸã¯è©•ä¾¡ã«åŸºã¥ããƒ¬ãƒ“ãƒ¥ãƒ¼ã®ä¿¡é ¼åº¦ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã€‚
- è©•ä¾¡é …ç›®ã®ç´°åˆ†åŒ–
- æ€§èƒ½ã€ãƒ‡ã‚¶ã‚¤ãƒ³ã€ä½¿ã„ã‚„ã™ã•ã€ã‚³ã‚¹ãƒˆãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãªã©å¤šè§’çš„ãªè¦–ç‚¹ã€‚
#### å®Ÿç¾æ–¹æ³•
- ã‚¹ãƒ‘ãƒ å¯¾ç­–ï¼šä¸æ­£ãªãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’æ¤œå‡ºã™ã‚‹ãŸã‚ã€æ©Ÿæ¢°å­¦ç¿’ã‚„ãƒ¢ãƒ‡ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚·ã‚¹ãƒ†ãƒ ã‚’å°å…¥ã€‚
- ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ‡ãƒ¼ã‚¿ã®æ´»ç”¨ï¼šãƒ¬ãƒ“ãƒ¥ãƒ¼å†…å®¹ã‚’è‡ªç„¶è¨€èªå‡¦ç†ï¼ˆNLPï¼‰ã§è§£æã—ã€äººæ°—ã®ãƒˆãƒ”ãƒƒã‚¯ã‚’å¯è¦–åŒ–ã€‚
### ãƒ©ãƒ³ã‚­ãƒ³ã‚°æ©Ÿèƒ½
#### ç›®çš„
äººæ°—å•†å“ã‚„ãƒˆãƒ¬ãƒ³ãƒ‰å•†å“ã‚’ä¸€è¦§åŒ–ã—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ææ¡ˆã€‚
#### ç‰¹å¾´
- ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã®å¤šæ§˜æ€§
- å£²ã‚Œç­‹ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã€ãƒ¬ãƒ“ãƒ¥ãƒ¼è©•ä¾¡ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã€ä¾¡æ ¼ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã€‚
- ãƒ‘ãƒ¼ã‚½ãƒŠãƒ©ã‚¤ã‚º
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®é–²è¦§å±¥æ­´ã‚„æ¤œç´¢å±¥æ­´ã«åŸºã¥ããƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã€‚
#### å®Ÿç¾æ–¹æ³•
- ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ï¼šãƒ©ãƒ³ã‚­ãƒ³ã‚°ã¯é–²è¦§æ•°ã€è³¼å…¥æ•°ã€ãƒ¬ãƒ“ãƒ¥ãƒ¼æ•°ãªã©ã‚’åŸºã«ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°ã—ã¦ç®—å‡ºã€‚
- AIæ´»ç”¨ï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å—œå¥½ã«å¿œã˜ãŸãƒ¬ã‚³ãƒ¡ãƒ³ãƒ‰ã€‚
### å•†å“ã®ã‚¹ãƒšãƒƒã‚¯æ¯”è¼ƒ
#### ç›®çš„
è¤‡æ•°å•†å“ã®ä»•æ§˜ã‚„æ€§èƒ½ã‚’è¦–è¦šçš„ã«æ¯”è¼ƒã€‚
#### ç‰¹å¾´
- ã‚¹ãƒšãƒƒã‚¯è¡¨
- è¤‡æ•°å•†å“ã®æ€§èƒ½ã‚’è¡¨å½¢å¼ã§è¡¨ç¤ºã€‚
- è¦–è¦šçš„ãªå·®åˆ¥åŒ–
- é‡è¦ãªé•ã„ã‚’ãƒã‚¤ãƒ©ã‚¤ãƒˆè¡¨ç¤ºã—ã€ç›´æ„Ÿçš„ã«ç†è§£ã§ãã‚‹ã€‚
#### å®Ÿç¾æ–¹æ³•
- ãƒ‡ãƒ¼ã‚¿ç®¡ç†ï¼šJSONã‚„ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆå½¢å¼ã§ã‚¹ãƒšãƒƒã‚¯ã‚’ä¸€å…ƒç®¡ç†ã€‚
- å‹•çš„æ¯”è¼ƒãƒ„ãƒ¼ãƒ«ï¼šVue.jsã‚„Reactãªã©ã®ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’æ´»ç”¨ã—ã¦ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ã‚’å‘ä¸Šã€‚
### è³¼å…¥å…ˆãƒªãƒ³ã‚¯
#### ç›®çš„
ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæœ€é©ãªè²©å£²åº—ã«ç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚
#### ç‰¹å¾´
- è²©å£²åº—æƒ…å ±ã®å……å®Ÿ
- ä¾¡æ ¼ä»¥å¤–ã«é€æ–™ã€åœ¨åº«ã€ãƒã‚¤ãƒ³ãƒˆé‚„å…ƒæƒ…å ±ã‚’ä½µè¨˜ã€‚
- ã‚¢ãƒ•ã‚£ãƒªã‚¨ã‚¤ãƒˆåç›ŠåŒ–
- è³¼å…¥ãƒªãƒ³ã‚¯ã«ã‚¢ãƒ•ã‚£ãƒªã‚¨ã‚¤ãƒˆã‚³ãƒ¼ãƒ‰ã‚’ä»˜ä¸ã€‚
#### å®Ÿç¾æ–¹æ³•
- ã‚¢ãƒ•ã‚£ãƒªã‚¨ã‚¤ãƒˆãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ï¼šå„è²©å£²åº—ã¨ã®ææºã«ã‚ˆã‚‹åç›ŠåŒ–ã€‚
- ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ãƒ„ãƒ¼ãƒ«ï¼šGoogle Analyticsãªã©ã§ã‚¯ãƒªãƒƒã‚¯ç‡ã‚„è³¼è²·ãƒ‡ãƒ¼ã‚¿ã‚’åˆ†æã€‚
### æ¯”è¼ƒãƒ„ãƒ¼ãƒ«ã®UI/UX
#### ç›®çš„
åˆå¿ƒè€…ã§ã‚‚ç°¡å˜ã«ä½¿ãˆã‚‹ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’æä¾›ã€‚
#### ç‰¹å¾´
- ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³
- ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ã‚„ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆã«ã‚‚æœ€é©åŒ–ã€‚
- ã‚·ãƒ³ãƒ—ãƒ«ã§ç›´æ„Ÿçš„ãªãƒ‡ã‚¶ã‚¤ãƒ³
- æ¯”è¼ƒãƒœã‚¿ãƒ³ã€ã‚«ãƒ¼ãƒˆè¿½åŠ ãƒœã‚¿ãƒ³ãŒç›®ç«‹ã¤ä½ç½®ã«é…ç½®ã€‚
#### å®Ÿç¾æ–¹æ³•
- ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰æŠ€è¡“ï¼šReact.jsã‚„Next.jsã§é«˜æ€§èƒ½ãªUIã‚’æ§‹ç¯‰ã€‚
- ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆï¼šUIæ”¹å–„ã®ãŸã‚ã«å®šæœŸçš„ã«A/Bãƒ†ã‚¹ãƒˆã‚’å®Ÿæ–½ã€‚
### ã‚µãƒ¼ãƒ“ã‚¹æ¯”è¼ƒï¼ˆä¿é™ºã€é€šä¿¡ã€é‡‘èãªã©ï¼‰
#### ç›®çš„
å•†å“ã ã‘ã§ãªãã€ã‚µãƒ¼ãƒ“ã‚¹ï¼ˆä¿é™ºã€å…‰å›ç·šã€ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰ãªã©ï¼‰ã‚’æ¯”è¼ƒã€‚
#### ç‰¹å¾´
- ãƒ—ãƒ©ãƒ³åˆ¥æ¯”è¼ƒ
- æœˆé¡æ–™é‡‘ã€ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³ã€åˆ©ç”¨å¯èƒ½åœ°åŸŸãªã©ã‚’æ¯”è¼ƒã€‚
- è¨ºæ–­ãƒ„ãƒ¼ãƒ«
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å…¥åŠ›æƒ…å ±ã«åŸºã¥ã„ã¦æœ€é©ãªãƒ—ãƒ©ãƒ³ã‚’ææ¡ˆã€‚
#### å®Ÿç¾æ–¹æ³•
- å‹•çš„ãƒ•ã‚©ãƒ¼ãƒ ï¼šãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§æ¡ä»¶ã‚’å¤‰ãˆã‚‰ã‚Œã‚‹ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã€‚
- ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å‡¦ç†ï¼šè¤‡é›‘ãªæ–™é‡‘ä½“ç³»ã‚’ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§è¨ˆç®—ã€‚
### ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæ©Ÿèƒ½
#### ç›®çš„
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®åˆ©ä¾¿æ€§ã‚’å‘ä¸Šã•ã›ã‚‹ãŸã‚ã®ãƒ‘ãƒ¼ã‚½ãƒŠãƒ©ã‚¤ã‚ºã€‚
#### ç‰¹å¾´
- ãŠæ°—ã«å…¥ã‚Šç™»éŒ²
- æ°—ã«ãªã‚‹å•†å“ã‚’ä¿å­˜ã€‚
- é€šçŸ¥æ©Ÿèƒ½
- ä¾¡æ ¼å¤‰å‹•ã‚„ã‚»ãƒ¼ãƒ«æƒ…å ±ã‚’é€šçŸ¥ã€‚
#### å®Ÿç¾æ–¹æ³•
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆï¼šå„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«é–¢é€£ä»˜ã‘ãŸãƒ‡ãƒ¼ã‚¿ã‚’åŠ¹ç‡çš„ã«ç®¡ç†ã€‚
- ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥ï¼šFirebaseã‚„SNSé€£æºã‚’æ´»ç”¨ã€‚

### æ¯”è¼ƒã®å•é¡Œç‚¹
#### å•†å“æ¯ã®ä¾¡æ ¼æ¯”è¼ƒã«ãªã£ã¦ã„ã‚‹
- å¯èƒ½ã§ã‚ã‚Œã°å•†å“åˆ¥ã«æ¯”è¼ƒã‚’è¡Œã†
- ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³åˆ¥ã«æ¯”è¼ƒã‚’è¡Œã†
- ã‚»ãƒ¼ãƒ«åˆ¥ã«æ¯”è¼ƒã‚’è¡Œã†

### å¤–éƒ¨ã‚«ãƒ¼ãƒˆå•†å“è³¼å…¥æ©Ÿèƒ½
#### ç›®çš„
- å¤–éƒ¨ã®è¤‡æ•°ECã§è²·ã„ç‰©ã‚’è¡Œã†
#### ç‰¹å¾´
- å¤–éƒ¨ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®ç™»éŒ²
- æŒ‡å®šå•†å“ã‚’è‡ªå‹•ã§ã‚«ãƒ¼ãƒˆã«å…¥ã‚Œã‚‹
- è³¼å…¥å¾Œãƒ¡ãƒ¼ãƒ«ã‚’ã¾ã¨ã‚ã‚‹
- ä½æ‰€ãªã©ã‚’è‡ªå‹•å…¥åŠ›
- puppeteerã‚’åˆ©ç”¨
- SSOã®åˆ©ç”¨
- React + Authentication OpenIDConnect èªè¨¼

#### ã‚³ãƒãƒ¼ã‚¹
- ãƒãƒ«ãƒãƒãƒ£ãƒãƒ«ã‚³ãƒãƒ¼ã‚¹ (Multi-channel Commerce)
 è¤‡æ•°ã®ãƒãƒ£ãƒãƒ«ï¼ˆECã‚µã‚¤ãƒˆã€ãƒãƒ¼ã‚±ãƒƒãƒˆãƒ—ãƒ¬ã‚¤ã‚¹ã€SNSãªã©ï¼‰ã‚’é€šã˜ã¦å•†å“ã‚’è³¼å…¥ãƒ»è²©å£²ã™ã‚‹ä»•çµ„ã¿ã€‚
- ã‚¯ãƒ­ã‚¹ãƒ¢ãƒ¼ãƒ«ã‚³ãƒãƒ¼ã‚¹ (Cross-mall Commerce)
 è¤‡æ•°ã®ECãƒ¢ãƒ¼ãƒ«ï¼ˆä¾‹ï¼šAmazonã€æ¥½å¤©ã€Yahoo!ã‚·ãƒ§ãƒƒãƒ”ãƒ³ã‚°ãªã©ï¼‰ã‚’ã¾ãŸã„ã§å•†å“ã‚’è³¼å…¥ã§ãã‚‹ä»•çµ„ã¿ã€‚
- ã‚ªãƒ ãƒ‹ãƒãƒ£ãƒãƒ«ã‚³ãƒãƒ¼ã‚¹ (Omnichannel Commerce)
 ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ãƒ»ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã‚’å«ã‚€ã‚ã‚‰ã‚†ã‚‹ãƒãƒ£ãƒãƒ«ã§çµ±åˆçš„ã«å•†å“ã‚’è³¼å…¥ãƒ»æä¾›ã™ã‚‹ä»•çµ„ã¿ã€‚
- ãƒ¡ã‚¿ã‚·ãƒ§ãƒƒãƒ”ãƒ³ã‚° (Meta Shopping)
 è¤‡æ•°ã®ECã‚µã‚¤ãƒˆã‚’æ¨ªæ–­ã—ã¦ä¾¡æ ¼ã‚„å•†å“ã‚’æ¯”è¼ƒã—ã€è³¼å…¥ã‚’æ”¯æ´ã™ã‚‹ä»•çµ„ã¿ã€‚
- ã‚¢ã‚°ãƒªã‚²ãƒ¼ãƒˆã‚³ãƒãƒ¼ã‚¹ (Aggregate Commerce)
 ç•°ãªã‚‹ECãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã®å•†å“ã‚’1ã¤ã®ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã‚„ã‚µãƒ¼ãƒ“ã‚¹ã§ã¾ã¨ã‚ã¦è³¼å…¥å¯èƒ½ã«ã™ã‚‹ä»•çµ„ã¿ã€‚

# ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹
###

#threads
##API

https://developers.facebook.com/docs/threads


---

# api
## pages/api/hello.js
- Next.js API route support: [https://nextjs.org/docs/api-routes/introduction](https://nextjs.org/docs/api-routes/introduction)

~~~ js
export default function handler(req, res) {
  res.status(200).json({ name: 'John Doe' })
}
~~~

~~~sh
curl http://localhost:3000/api/hello
{"name":"John Doe"}
~~~

# shopify

# Hydrogen
https://hydrogen.shopify.dev/

---

# branches rule
  - backend_ ã‚„ frontend_ ã®æ¥é ­è¾ã‚’ä½¿ã‚ãšã€éšå±¤çš„ãªå‘½åã‚’ã™ã‚‹
  - é•·ã„ãƒ–ãƒ©ãƒ³ãƒåã‚’é¿ã‘ã€ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã¨ä¸€è‡´ã•ã›ã‚‹
  - ã‚±ãƒãƒ–ã‚±ãƒ¼ã‚¹ï¼ˆ-ï¼‰
  - ä¾‹: backend-config-database, frontend-components-layout

---

# prefix branches
- prefix | å„æ©Ÿèƒ½ã‚„å…¨ä½“ã‚’ã¾ã¨ã‚ã‚‹ãƒ–ãƒ©ãƒ³ãƒ(ãƒ¡ã‚¤ãƒ³ãƒ–ãƒ©ãƒ³ãƒ)

main  # æœ¬ç•ªç’°å¢ƒ
  - stagingã®ãƒ‡ãƒ—ãƒ­ã‚¤ã®ã¿ã®æœ¬ç•ªç’°å¢ƒ

staging  # ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ç’°å¢ƒ
  - devã®ãƒ‡ãƒ—ãƒ­ã‚¤ã®ã¿ã®ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ç’°å¢ƒ

dev  # é–‹ç™ºç’°å¢ƒ
  - prefixã‚’ã¾ã¨ã‚ãŸã€é–‹ç™ºç’°å¢ƒç”¨ã®ãƒ–ãƒ©ãƒ³ãƒ

---

# github actions
tag.yml: release/verâšªï¸.âšªï¸.âšªï¸ -> è‡ªå‹•ã‚¿ã‚°

# git ãƒ–ãƒ©ãƒ³ãƒã‚³ãƒŸãƒƒãƒˆåˆ¶é™
ãƒ–ãƒ©ãƒ³ãƒåã¨ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã®ãƒ«ãƒ¼ãƒ«ã«é•åã—ãŸå ´åˆã«ã‚¨ãƒ©ãƒ¼

## æ­£å¸¸ãªã‚±ãƒ¼ã‚¹
ãƒ–ãƒ©ãƒ³ãƒ: src-index.js
å¤‰æ›´ãƒ•ã‚¡ã‚¤ãƒ«:
~~~
src/index.js  âœ… OK
src/utils.js  âœ… OK
~~~

## ã‚¨ãƒ©ãƒ¼ã‚±ãƒ¼ã‚¹
ãƒ–ãƒ©ãƒ³ãƒ: src-index.js
å¤‰æ›´ãƒ•ã‚¡ã‚¤ãƒ«:
~~~
lib/helper.js âŒ NG (lib/ ã¯ src-index.js ã«å¯¾å¿œã—ã¦ã„ãªã„)
ğŸš¨ ã‚¨ãƒ©ãƒ¼: 'lib/helper.js' ã¯ 'src-index.js' ã®å¯¾è±¡ãƒ•ã‚©ãƒ«ãƒ€ã§ã¯ã‚ã‚Šã¾ã›ã‚“ï¼
   'src' ãƒ•ã‚©ãƒ«ãƒ€ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿ã‚³ãƒŸãƒƒãƒˆã§ãã¾ã™ã€‚
~~~

---

# æ§‹æˆ

æ§‹æˆã®ãƒã‚¤ãƒ³ãƒˆ
	1.	ãƒ•ãƒ«ã‚¹ã‚¿ãƒƒã‚¯ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
	â€¢	ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã¯Node.jsï¼ˆExpressï¼‰ã§æ§‹ç¯‰ã—ã€ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ï¼ˆPuppeteerï¼‰ã‚„APIãƒ‡ãƒ¼ã‚¿å–å¾—ã‚’å®Ÿæ–½ã€‚
	â€¢	ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¯React (Next.js) ã§æ§‹ç¯‰ã—ã€TailwindCSSã§ãƒ‡ã‚¶ã‚¤ãƒ³ã‚’é©ç”¨ã€‚
	â€¢	ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¯microCMSã‚’ä½¿ç”¨ã—ã¦ã€å‹•çš„ãªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç®¡ç†ã‚’å®Ÿç¾ã€‚
	2.	ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ï¼†APIã®è‡ªå‹•åˆ¤å®š
	â€¢	Puppeteerã‚’æ´»ç”¨ã—ã¦ECã‚µã‚¤ãƒˆã®æƒ…å ±ã‚’å–å¾—ã€‚
	â€¢	å„ECã‚µã‚¤ãƒˆã®APIã‚’åˆ¤å®šã—ã€åˆ©ç”¨å¯å¦ã‚’ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«æ ¼ç´ã€‚
	3.	ä¸€å…ƒç®¡ç†æ©Ÿèƒ½
	â€¢	ãƒ¦ãƒ¼ã‚¶ãƒ¼ã”ã¨ã®Gmailã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’APIã§ç®¡ç†ã—ã€ECã‚µã‚¤ãƒˆã®ä¼šå“¡ç™»éŒ²ã‚’çµ±ä¸€ã€‚
	â€¢	è³¼å…¥å±¥æ­´ãƒ»ãƒã‚¤ãƒ³ãƒˆãƒ»é…é€çŠ¶æ³ãƒ»ã‚­ãƒ£ãƒ³ã‚»ãƒ«çŠ¶æ³ã‚’ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§å¯è¦–åŒ–ã€‚
	4.	ãƒ¬ã‚³ãƒ¡ãƒ³ãƒ‰æ¤œç´¢æ©Ÿèƒ½
	â€¢	å„ªå…ˆã—ãŸECã‚µã‚¤ãƒˆã®å•†å“ã‚’æ¤œç´¢çµæœã§å„ªå…ˆçš„ã«è¡¨ç¤ºã€‚
	â€¢	Google Maps APIã¨é€£æºã—ã€ãƒªã‚¢ãƒ«åº—èˆ—ã®åœ¨åº«çŠ¶æ³ã‚’è¡¨ç¤ºã€‚

## system directory
/root
â”‚â”€â”€ /backend
â”‚â”€â”€ /scripts
â”‚â”€â”€ /docs
â”‚â”€â”€ .env
â”‚â”€â”€ .gitignore
â”‚â”€â”€ README.md
â”‚â”€â”€ package.json
â”‚â”€â”€ tsconfig.json
â”‚â”€â”€ docker-compose.yml

---
# backend
## backendæ§‹æˆ
/backend
â”‚â”€â”€ /src
  â”‚â”€â”€ /api
  â”‚   â”‚â”€â”€ apiClient.ts        # microCMS APIã®æ¥ç¶šè¨­å®š
  â”‚   â”‚â”€â”€ errorHandling.ts
  â”‚   â”‚â”€â”€ puppeteerApi.ts
  â”‚â”€â”€ /config
  â”‚   â”‚â”€â”€ database.ts        # microCMSã€Stripeã€Gmail APIã®æ¥ç¶šè¨­å®š
  â”‚   â”‚â”€â”€ auth.ts            # èªè¨¼é–¢é€£ã®è¨­å®š
  â”‚   â”‚â”€â”€ puppeteer.ts       # Puppeteerã®è¨­å®šã¨åˆ¶å¾¡
  â”‚
  â”‚â”€â”€ /controllers
  â”‚   â”‚â”€â”€ authController.ts      # ECã‚µã‚¤ãƒˆã®èªè¨¼å‡¦ç†
  â”‚   â”‚â”€â”€ purchaseController.ts  # è³¼å…¥å‡¦ç†ï¼ˆã‚«ãƒ¼ãƒˆè¿½åŠ ã€æ±ºæ¸ˆï¼‰
  â”‚   â”‚â”€â”€ scrapingController.ts  # ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°åˆ¶å¾¡
  â”‚   â”‚â”€â”€ emailController.ts     # Gmail APIçµŒç”±ã§ãƒ¡ãƒ¼ãƒ«å–å¾—ãƒ»è§£æ
  â”‚   â”‚â”€â”€ pointController.ts     # ECãƒã‚¤ãƒ³ãƒˆæƒ…å ±ç®¡ç†
  â”‚   â”‚â”€â”€ shippingController.ts  # é…é€æƒ…å ±å–å¾—
  â”‚   â”‚â”€â”€ cancelController.ts    # ã‚­ãƒ£ãƒ³ã‚»ãƒ«æƒ…å ±å–å¾—
  â”‚   â”‚â”€â”€ apiCheckController.ts  # APIã®æœ‰ç„¡ã€ç¨®é¡ã®åˆ¤å®š
  â”‚
  â”‚â”€â”€ /models
  â”‚   â”‚â”€â”€ User.ts           # ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±
  â”‚   â”‚â”€â”€ Product.ts        # å•†å“æƒ…å ±
  â”‚   â”‚â”€â”€ Purchase.ts       # è³¼å…¥å±¥æ­´
  â”‚   â”‚â”€â”€ ECAccount.ts      # ECã‚µã‚¤ãƒˆã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæƒ…å ±
  â”‚   â”‚â”€â”€ Point.ts          # ãƒã‚¤ãƒ³ãƒˆæƒ…å ±
  â”‚   â”‚â”€â”€ Shipping.ts       # é…é€çŠ¶æ³
  â”‚   â”‚â”€â”€ Favorite.ts       # ãŠæ°—ã«å…¥ã‚Šæƒ…å ±
  â”‚   â”‚â”€â”€ APIStatus.ts      # å„ECã‚µã‚¤ãƒˆã®APIæƒ…å ±
  â”‚
  â”‚â”€â”€ /routes
  â”‚   â”‚â”€â”€ authRoutes.ts          # èªè¨¼ç”¨APIãƒ«ãƒ¼ãƒˆ
  â”‚   â”‚â”€â”€ purchaseRoutes.ts      # è³¼å…¥é–¢é€£API
  â”‚   â”‚â”€â”€ scrapingRoutes.ts      # ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°API
  â”‚   â”‚â”€â”€ emailRoutes.ts         # ãƒ¡ãƒ¼ãƒ«ç®¡ç†API
  â”‚   â”‚â”€â”€ pointRoutes.ts         # ãƒã‚¤ãƒ³ãƒˆç®¡ç†API
  â”‚   â”‚â”€â”€ shippingRoutes.ts      # é…é€ç®¡ç†API
  â”‚   â”‚â”€â”€ cancelRoutes.ts        # ã‚­ãƒ£ãƒ³ã‚»ãƒ«ç®¡ç†API
  â”‚   â”‚â”€â”€ apiCheckRoutes.ts      # APIåˆ¤å®šAPI
  â”‚   â”‚â”€â”€ recommendationRoutes.ts # æ¤œç´¢ãƒ¬ã‚³ãƒ¡ãƒ³ãƒ‰API
  â”‚
  â”‚â”€â”€ /services
  â”‚   â”‚â”€â”€ scrapingService.ts  # å„ECã‚µã‚¤ãƒˆã®ãƒ‡ãƒ¼ã‚¿å–å¾—ã‚µãƒ¼ãƒ“ã‚¹
  â”‚   â”‚â”€â”€ authService.ts      # èªè¨¼å‡¦ç†ã®ãƒ­ã‚¸ãƒƒã‚¯
  â”‚   â”‚â”€â”€ emailService.ts     # Gmail APIã®åˆ¶å¾¡
  â”‚   â”‚â”€â”€ pointService.ts     # ãƒã‚¤ãƒ³ãƒˆã®å–å¾—ãƒ»ç®¡ç†
  â”‚   â”‚â”€â”€ shippingService.ts  # é…é€çŠ¶æ³ã®å–å¾—
  â”‚   â”‚â”€â”€ cancelService.ts    # ã‚­ãƒ£ãƒ³ã‚»ãƒ«æ‰‹ç¶šãã®å‡¦ç†
  â”‚   â”‚â”€â”€ apiCheckService.ts  # APIã®åˆ¤å®šå‡¦ç†
  â”‚
  â”‚â”€â”€ /utils
  â”‚   â”‚â”€â”€ puppeteerUtils.ts   # Puppeteerã®ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°
  â”‚   â”‚â”€â”€ emailParser.ts      # ãƒ¡ãƒ¼ãƒ«è§£æãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
  â”‚   â”‚â”€â”€ pointCalculator.ts  # ãƒã‚¤ãƒ³ãƒˆè¨ˆç®—ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
  â”‚   â”‚â”€â”€ apiChecker.ts       # APIã®æœ‰ç„¡ã‚’åˆ¤å®šã™ã‚‹ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
  â”‚
â”‚â”€â”€ server.ts        # ã‚µãƒ¼ãƒãƒ¼ã®è¨­å®šãƒ»èµ·å‹•ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”‚â”€â”€ docs # ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â”‚   â”‚â”€â”€ API_Specifications.md # APIä»•æ§˜æ›¸
â”‚   â”‚â”€â”€ Database_Schema.md     # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ
â”‚   â”‚â”€â”€ Setup_Guide.md         # ç’°å¢ƒæ§‹ç¯‰æ‰‹é †
â”‚   â”‚â”€â”€ Scraping_Guidelines.md # ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã®ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³

---

# backendèµ·å‹•æ–¹æ³•
### typescriptã‚’ãƒ“ãƒ«ãƒ‰
npx tsc

---

# D1èµ·å‹•æ–¹æ³•
```
wrangler d1 create pup 
wrangler d1 execute my-database --file=setup.sql
wrangler d1 list 
wrangler dev
wrangler dev src/index.ts
wrangler dev --config wrangler.toml
```

## ãƒ†ãƒ¼ãƒ–ãƒ«ãŒä½œæˆã•ã‚ŒãŸã‹ç¢ºèª
```
wrangler d1 execute pup --command="SELECT name FROM sqlite_master WHERE type='table';"
```

## ãƒ†ãƒ¼ãƒ–ãƒ«ãƒ‡ãƒ¼ã‚¿ç¢ºèª
```
wrangler d1 execute pup --command="SELECT name FROM sqlite_master WHERE type='table';"
```

## ãƒªãƒ¢ãƒ¼ãƒˆãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹é©ç”¨
```
wrangler d1 execute pup --file=setup.sql --remote
```

## CURL POST è¿½åŠ 
```
curl -X POST http://localhost:8787/api/contents \
     -H "Content-Type: application/json" \
     -d '{"title":"æ–°è¦ãƒ‡ãƒ¼ã‚¿","body":"ã“ã‚Œã¯ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã§ã™","visible":true}'
```

## å‰Šé™¤æ‰‹é †
### ãƒ‡ãƒ¼ã‚¿ãƒ¼ãƒ™ãƒ¼ã‚¹å…¨ä½“ã®å‰Šé™¤
â€» wrangler ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’å‰Šé™¤ã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã¯æä¾›ã•ã‚Œã¦ã„ãªã„
	1.	Cloudflare Dashboard ã«ãƒ­ã‚°ã‚¤ãƒ³
	2.	Workers & Pages â†’ D1 ã‚’é–‹ã
	3.	pup ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’é¸æŠ
	4.	Delete Database (ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’å‰Šé™¤) ã‚’ã‚¯ãƒªãƒƒã‚¯
	5.	ç¢ºèªãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã« pup ã‚’å…¥åŠ›ã—å‰Šé™¤

### ç‰¹å®šã®ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’å‰Šé™¤ã™ã‚‹
```
wrangler d1 execute pup --command="DROP TABLE contents;"
```

### ãƒ†ãƒ¼ãƒ–ãƒ«å†…ã®ãƒ‡ãƒ¼ã‚¿ã®ã¿å‰Šé™¤ï¼ˆåˆæœŸåŒ–ï¼‰
â€» id ã® AUTOINCREMENT ã¯ãƒªã‚»ãƒƒãƒˆã•ã‚Œãªã„ã€‚
```
wrangler d1 execute pup --command="DELETE FROM contents;"
```

### TRUNCATE ã®ä»£æ›¿ï¼ˆå®Œå…¨åˆæœŸåŒ–ï¼‰
```
wrangler d1 execute pup --command="DELETE FROM contents; VACUUM;"
```

### ãƒ­ãƒ¼ã‚«ãƒ«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®å‰Šé™¤
```
rm -rf .wrangler/state/v3/d1
```




---

# Maintenance (ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹)
maintenance-mode

---

# cloudflare D1ã«JSONãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡ã™ã‚‹API
```mermaid
sequenceDiagram
    participant Client as ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆï¼ˆæ‹¡å¼µæ©Ÿèƒ½ç­‰ï¼‰
    participant NextAPI as Next.js API
    participant cloudflare D1 as cloudflare D1

    Client->>NextAPI: JSONãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡ (POST /api/upload-json)
    NextAPI->>cloudflare D1: cloudflare D1ã«ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜
    cloudflare D1->>NextAPI: ä¿å­˜çµæœã‚’è¿”ã™
    NextAPI->>Client: ä¿å­˜å®Œäº†ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¿”ã™
```

# D1ã«JSONãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡ã™ã‚‹API
```mermaid
sequenceDiagram
    participant Client as ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆï¼ˆæ‹¡å¼µæ©Ÿèƒ½ç­‰ï¼‰
    participant NextAPI as Next.js API
    participant d1 as d1

    Client->>NextAPI: JSONãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡ (POST /api/upload-json)
    NextAPI->>d1: d1ã«ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜
    d1->>NextAPI: ä¿å­˜çµæœã‚’è¿”ã™
    NextAPI->>Client: ä¿å­˜å®Œäº†ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¿”ã™
```

---

# 30æ—¥ã”ã¨ã®èªå¯ã‚³ãƒ¼ãƒ‰å†å–å¾—
```mermaid
graph TD
    A[èµ·å‹•æ™‚ã«ãƒˆãƒ¼ã‚¯ãƒ³ç¢ºèª] --> B{æœŸé™åˆ‡ã‚Œã‹ï¼Ÿ}
    B -- Yes --> C[Puppeteerã§å†å–å¾—]
    B -- No --> D[æ—¢å­˜ãƒˆãƒ¼ã‚¯ãƒ³ä½¿ç”¨]
    C --> E[DBã«æ–°ãƒˆãƒ¼ã‚¯ãƒ³ä¿å­˜]
    E --> D
```

### APIãƒ«ãƒ¼ãƒˆ
```mermaid
graph TD
    A[Client fetches token] --> B[/api/token GET/]
    A2[Client saves token] --> C[/api/token POST/]
    A3[Client updates token] --> D[/api/token PUT/]
    A4[Client deletes token] --> E[/api/token DELETE/]
    B --> F[Cloudflare D1 SELECT]
    C --> G[Cloudflare D1 INSERT]
    D --> H[Cloudflare D1 UPDATE]
    E --> I[Cloudflare D1 DELETE]
```

---

# ãƒ¡ãƒ¼ãƒ«ç¢ºèªã‚³ãƒ¼ãƒ‰ã‚’è‡ªå‹•å–å¾—ãƒ»å…¥åŠ›ã™ã‚‹æµã‚Œ
```mermaid
graph TD
  A[Puppeteerã§ãƒ­ã‚°ã‚¤ãƒ³è©¦è¡Œ] --> B[BASEã‹ã‚‰ç¢ºèªã‚³ãƒ¼ãƒ‰ãŒãƒ¡ãƒ¼ãƒ«é€ä¿¡ã•ã‚Œã‚‹]
  B --> C[ãƒ¡ãƒ¼ãƒ«å—ä¿¡ã‚µãƒ¼ãƒã§ç¢ºèªã‚³ãƒ¼ãƒ‰ã‚’å–å¾—-GmailApi]
  C --> D[Puppeteerã§ã‚³ãƒ¼ãƒ‰å…¥åŠ›æ¬„ã«è‡ªå‹•å…¥åŠ›]
  D --> E[ãƒ­ã‚°ã‚¤ãƒ³ãƒ»èªå¯å®Œäº†]
```

### è¨­è¨ˆ
```mermaid
graph TD
  A[Puppeteer or Frontend] -->|fetch| B[d1Client.ts]
  B -->|å‘¼ã³å‡ºã—| C[Hono API Routes : d1Server.ts]
  C -->|D1æ“ä½œ| D[Cloudflare D1]
```

- d1Server.ts: D1ã®APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆå®šç¾© (GET /token, POST /token etc)
- d1Client.ts: fetch ã‚’æŠ½è±¡åŒ–ã—ã¦ API çµŒç”±ã§ãƒ‡ãƒ¼ã‚¿æ“ä½œã™ã‚‹ï¼ˆå†åˆ©ç”¨æ€§é«˜ï¼‰
- scrape.tsï¼ˆPuppeteerç­‰ï¼‰ã‚„ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‹ã‚‰ d1Client.ts ã‚’å‘¼ã³å‡ºã™

### ãƒ†ã‚¹ãƒˆ
```mermaid
graph TD
  A[ãƒ†ã‚¹ãƒˆã®ç›®çš„] --> B[Gmail APIé€£æº]
  A --> C[èªè¨¼ã‚³ãƒ¼ãƒ‰æŠ½å‡º]
  A --> D[Puppeteeræ“ä½œ]
  A --> E[BASEèªå¯ã‚³ãƒ¼ãƒ‰ã®å–å¾—]
  A --> F[ãƒˆãƒ¼ã‚¯ãƒ³ä¿å­˜]

  B --> B1[Gmailã‹ã‚‰æ­£ã—ããƒ¡ãƒ¼ãƒ«å–å¾—ã§ãã‚‹]
  C --> C1[æœ¬æ–‡ã‹ã‚‰6æ¡ã‚³ãƒ¼ãƒ‰ã‚’æŠ½å‡ºã§ãã‚‹]
  D --> D1[ãƒ¡ãƒ¼ãƒ«ãƒ»ãƒ‘ã‚¹ãƒ»ã‚³ãƒ¼ãƒ‰ãŒè‡ªå‹•å…¥åŠ›ã•ã‚Œã‚‹]
  E --> E1[URLã‹ã‚‰?code=...ã‚’å–å¾—ã§ãã‚‹]
  F --> F1[D1ã«ãƒˆãƒ¼ã‚¯ãƒ³ãŒä¿å­˜ãƒ»æ›´æ–°ã•ã‚Œã‚‹]
```

#### BASEèªå¯ã‚³ãƒ¼ãƒ‰è‡ªå‹•å–å¾—å‡¦ç†ã®ãƒ†ã‚¹ãƒˆæ‰‹é †
1. `.env` ãŒæ­£ã—ã„ã“ã¨ã‚’ç¢ºèªï¼ˆGmailã¨BASEï¼‰
2. `fetchVerificationCode()` å˜ä½“ã§èªè¨¼ã‚³ãƒ¼ãƒ‰ã‚’å–å¾—
3. `scrapeBaseAuth()` ã‚’å®Ÿè¡Œã—ã€è‡ªå‹•ãƒ­ã‚°ã‚¤ãƒ³ï¼‹èªè¨¼ï¼‹ãƒˆãƒ¼ã‚¯ãƒ³å–å¾—ã‚’æ¤œè¨¼
4. Cloudflare D1 ã®ãƒˆãƒ¼ã‚¯ãƒ³ä¿å­˜ãŒ `/api/token` ã§ç¢ºèªã§ãã‚‹ã“ã¨
5. ã‚¨ãƒ©ãƒ¼æ™‚ã¯ Puppeteer ã®æ“ä½œå¯¾è±¡ã‚»ãƒ¬ã‚¯ã‚¿ãƒ»Gmailã®ãƒ¡ãƒ¼ãƒ«ä»¶åãªã©ã‚’è¦‹ç›´ã™

---

# ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã—ãŸç”»åƒã‚’ BASEã«ç™»éŒ²ã—ã€ç”»åƒã‚’CDNã¨ã—ã¦å†åˆ©ç”¨ã™ã‚‹ã€‚
- puppeteer: ECã‚·ãƒ§ãƒƒãƒ—ã‹ã‚‰ç”»åƒå–å¾—
- backend: BASE API çµŒç”±ã§ç”»åƒç™»éŒ²
- BASE: ç”»åƒãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚° (CDNçš„ã«åˆ©ç”¨)

```mermaid
flowchart TD
  A[ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°å¯¾è±¡ECã‚·ãƒ§ãƒƒãƒ—] --> B[puppeteerã§ç”»åƒã‚’å–å¾—]
  B --> C[ç”»åƒã‚’ä¸€æ™‚ä¿å­˜]
  C --> D[BASE APIã§ç”»åƒã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰]
  D --> E[BASEå´ã§ç”»åƒURLç™ºè¡Œ]
  E --> F[Cloudflare D1ã«URLä¿å­˜]
  F --> G[ãƒ•ãƒ­ãƒ³ãƒˆã§CDNç”»åƒURLã¨ã—ã¦å†åˆ©ç”¨]
```

---

# ã‚¿ã‚ªãƒã‚ªã®å›½éš›é€æ–™è¨ˆç®—æ©Ÿ
```
project-root/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ controllers/
â”‚   â”‚   â””â”€â”€ shippingController.js
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ taobaoApiService.js
â”‚   â”‚   â””â”€â”€ shippingCalculator.js
â”‚   â””â”€â”€ routes/
â”‚       â””â”€â”€ shippingRoutes.js
â””â”€â”€ frontend/
    â”œâ”€â”€ components/
    â”‚   â””â”€â”€ ShippingCalculator.jsx
    â””â”€â”€ pages/
        â””â”€â”€ index.jsx
```